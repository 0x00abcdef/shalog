(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[14],{k8Kd:function(e,t,a){"use strict";var n=a("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("5NDa");var i=n(a("5rEg"));a("2qtc");var l=n(a("kLXV")),d=n(a("eHn4"));a("g9YV");var o=n(a("wCAj"));a("+L6B");var s=n(a("2/Rp"));a("IzEo");var r=n(a("bx4M"));a("P2fV");var u=n(a("NJEC"));a("miYZ");var c=n(a("tsqr")),f=n(a("2Taf")),p=n(a("vZ4D")),m=n(a("l4Ni")),h=n(a("ujKo")),g=n(a("MhPg")),v=a("RBnf"),b=a("0Cfi");a("XlDN");var y=n(a("q1tI")),E=a("Hx5s"),S=a("Hg0r"),w=b.Form.Item,L=function(e){function t(){var e;return(0,f.default)(this,t),e=(0,m.default)(this,(0,h.default)(t).apply(this,arguments)),e.state={visible:!1,info:{name:"",description:"",id:0,count:0}},e.onShowModal=function(t){t.stopPropagation();var a=e.state.visible;e.setState({visible:!a,info:{}})},e.onEditModal=function(t,a){e.onShowModal(t),e.setState({info:a});var n=e.props.form;n.setFieldsValue({id:a.id})},e.handleDelete=function(t){var a=e.props.dispatch;a({type:"tagAndList/delete",payload:{id:t.id},callback:function(){c.default.success("\u5220\u9664\u6210\u529f."),a({type:"tagAndList/fetch"})}})},e.handleSubmit=function(){var t=e.props,a=t.form,n=t.dispatch,i=e.state.info;a.validateFieldsAndScroll(function(t,a){t||(i.id>0?(a.id=i.id,n({type:"tagAndList/update",payload:a,callback:function(){e.setState({visible:!1,info:{id:0,name:"",description:"",count:0}}),c.default.success("\u4fdd\u5b58\u6210\u529f!"),n({type:"tagAndList/fetch"})}})):n({type:"tagAndList/add",payload:a,callback:function(){e.setState({visible:!1,info:{id:0,name:"",description:"",count:0}}),c.default.success("\u4fdd\u5b58\u6210\u529f!"),n({type:"tagAndList/fetch"})}}))})},e.onChange=function(t,a){var n=e.props.dispatch;n({type:"tagAndList/fetch",payload:{pageSize:a,offset:(t-1)*a}})},e.columns=[{title:"\u540d\u79f0",dataIndex:"name",width:"30%",editable:!0},{title:"\u5f15\u7528\u6b21\u6570",dataIndex:"count"},{title:"\u64cd\u4f5c",render:function(t,a){return y.default.createElement("span",null,y.default.createElement(u.default,{title:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u8be5\u6807\u7b7e?",onConfirm:function(){return e.handleDelete(a)}},y.default.createElement("a",{style:{marginRight:2}},"\u5220\u9664")),"|",y.default.createElement("a",{style:{marginLeft:2},onClick:function(t){return e.onEditModal(t,a)}},"\u7f16\u8f91"))}}],e}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"tagAndList/fetch"})}},{key:"render",value:function(){var e,t=this.props,a=t.tagAndList,n=a.list,u=a.total,c=a.pageSize,f=t.form.getFieldDecorator,p=this.state.info,m={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:0},md:{span:16}}};return y.default.createElement(E.PageHeaderWrapper,null,y.default.createElement(r.default,{title:"\u6807\u7b7e\u5217\u8868"},y.default.createElement("div",{id:"components-table-demo-edit-cell"},y.default.createElement(s.default,{onClick:this.onShowModal,type:"primary",style:{marginBottom:16}},y.default.createElement(v.PlusOutlined,null),"\u6dfb\u52a0\u6807\u7b7e"),y.default.createElement(o.default,{rowClassName:function(){return"editable-row"},bordered:!0,dataSource:n,columns:this.columns,pagination:(e={total:u},(0,d.default)(e,"total",u),(0,d.default)(e,"pageSize",c),(0,d.default)(e,"onChange",this.onChange),e)}))),y.default.createElement(l.default,{title:"\u521b\u5efa\u6216\u7f16\u8f91\u6807\u7b7e",visible:this.state.visible,onOk:this.handleSubmit,onCancel:this.onShowModal},y.default.createElement(b.Form,{onSubmit:this.handleSubmit,hideRequiredMark:!0,style:{marginTop:8}},y.default.createElement(w,Object.assign({},m,{label:"\u6807\u7b7e\u540d\u79f0"}),f("name",{initialValue:p.name,rules:[{required:!0,message:"\u6807\u7b7e\u540d\u79f0\u4e0d\u80fd\u4e3a\u7a7a"}]})(y.default.createElement(i.default,{placeholder:"\u8bf7\u8f93\u5165\u6807\u7b7e\u540d\u79f0"}))))))}}]),t}(y.default.Component),A=(0,S.connect)(function(e){var t=e.tagAndList,a=e.loading;return{tagAndList:t,loading:a.models.categoryAndList}})(b.Form.create({})(L));t.default=A}}]);