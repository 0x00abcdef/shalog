(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{KwJS:function(e,t,n){"use strict";var a=n("tAuX"),i=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n("2Taf")),r=i(n("vZ4D")),s=i(n("l4Ni")),l=i(n("ujKo")),u=i(n("MhPg"));n("lUTK");var d=i(n("BvKs")),c=a(n("q1tI")),f=n("Hx5s"),p=n("Hg0r"),v=i(n("rq6H")),m=i(n("py4D")),h=d.default.Item,g=function(e){function t(e){var n;(0,o.default)(this,t),n=(0,s.default)(this,(0,l.default)(t).call(this,e)),n.main=void 0,n.getMenu=function(){var e=n.state.menuMap;return Object.keys(e).map(function(t){return c.default.createElement(h,{key:t},e[t])})},n.getRightTitle=function(){var e=n.state,t=e.selectKey,a=e.menuMap;return a[t]},n.selectKey=function(e){n.setState({selectKey:e})},n.resize=function(){n.main&&requestAnimationFrame(function(){if(n.main){var e="inline",t=n.main.offsetWidth;n.main.offsetWidth<641&&t>400&&(e="horizontal"),window.innerWidth<768&&t>400&&(e="horizontal"),n.setState({mode:e})}})},n.renderChildren=function(){var e=n.state.selectKey;return"base"===e?c.default.createElement(v.default,{saveSettings:n.onSaveSettings}):null},n.onSaveSettings=function(e,t){var a=n.props.dispatch;a({type:"setting/saveSettings",payload:e,callback:t})};var a={base:"\u57fa\u7840\u8bbe\u7f6e"};return n.state={mode:"inline",menuMap:a,selectKey:"base"},n}return(0,u.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"setting/fetchList"}),window.addEventListener("resize",this.resize),this.resize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize)}},{key:"render",value:function(){var e=this,t=this.state,n=t.mode,a=t.selectKey;return c.default.createElement(f.GridContent,null,c.default.createElement("div",{className:m.default.main,ref:function(t){t&&(e.main=t)}},c.default.createElement("div",{className:m.default.leftMenu},c.default.createElement(d.default,{mode:n,selectedKeys:[a],onClick:function(t){var n=t.key;return e.selectKey(n)}},this.getMenu())),c.default.createElement("div",{className:m.default.right},c.default.createElement("div",{className:m.default.title},this.getRightTitle()),this.renderChildren())))}}]),t}(c.Component),y=(0,p.connect)(function(e){var t=e.setting;return{settings:t.settings}})(g);t.default=y},Rw49:function(e,t,n){e.exports={baseView:"antd-pro-pages-setting-components-base-view-baseView",left:"antd-pro-pages-setting-components-base-view-left",right:"antd-pro-pages-setting-components-base-view-right",avatar_title:"antd-pro-pages-setting-components-base-view-avatar_title",avatar:"antd-pro-pages-setting-components-base-view-avatar",button_view:"antd-pro-pages-setting-components-base-view-button_view",infiniteContainer:"antd-pro-pages-setting-components-base-view-infiniteContainer",loadingContainer:"antd-pro-pages-setting-components-base-view-loadingContainer"}},ZoaZ:function(e,t,n){"use strict";var a=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("miYZ");var i=a(n("tsqr")),o=a(n("d6i3")),r=a(n("1l/V")),s=a(n("2Taf")),l=a(n("vZ4D")),u=a(n("l4Ni")),d=a(n("ujKo")),c=a(n("MhPg")),f=a(n("q1tI")),p=a(n("yEr3"));n("Lzxq");var v=a(n("Rw49")),m=a(n("sy1d")),h=function(e){function t(){var e;return(0,s.default)(this,t),e=(0,u.default)(this,(0,d.default)(t).apply(this,arguments)),e.state={editorState:null},e.submitContent=(0,r.default)(o.default.mark(function t(){var n,a,i;return o.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:n=e.props,a=n.saveEditorContent,i=n.id,a(e.state.editorState.toHTML(),i);case 2:case"end":return t.stop()}},t)})),e.handleEditorChange=function(t){e.setState({editorState:t});var n=e.props,a=n.handleEditorChange,i=n.id;a(t.toHTML(),i)},e.uploadMedia=function(e){var t=new FormData;t.append("file",e.file),(0,m.default)("/image/upload",{method:"post",data:t,credentials:"include",prefix:"localhost"===window.location.hostname?"http://localhost:8080":"",headers:{mode:"cors",Authorization:localStorage.getItem("Authorization")}}).then(function(t){if(t)if(t.success){var n=t.data[0];e.success({url:n.url,meta:{id:n.id,title:n.filename,alt:n.filename,loop:!1,autoPlay:!1,controls:!0,poster:n.url}})}else i.default.error(t.error);else i.default.error("\u7f51\u7edc\u9519\u8bef")})},e}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.content;this.setState({editorState:p.default.createEditorState(e)})}},{key:"render",value:function(){var e=this.props,t=e.content,n=e.controls,a=this.state.editorState;return f.default.createElement("div",{className:v.default.postContent},f.default.createElement(p.default,{media:{uploadFn:this.uploadMedia},controls:n,value:a,onChange:this.handleEditorChange,onSave:this.submitContent,defaultValue:t}))}}]),t}(f.default.Component);t.default=h},py4D:function(e,t,n){e.exports={main:"antd-pro-pages-setting-style-main",leftMenu:"antd-pro-pages-setting-style-leftMenu",right:"antd-pro-pages-setting-style-right",title:"antd-pro-pages-setting-style-title"}},rq6H:function(e,t,n){"use strict";var a=n("tAuX"),i=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("+L6B");var o=i(n("2/Rp"));n("T2oS");var r=i(n("W9HT")),s=i(n("2Taf")),l=i(n("vZ4D")),u=i(n("l4Ni")),d=i(n("ujKo")),c=i(n("MhPg")),f=n("0Cfi");n("XlDN");var p=a(n("q1tI")),v=n("Hg0r"),m=i(n("Rw49")),h=i(n("whJP")),g=i(n("ZoaZ")),y=f.Form.Item,w=function(e){function t(){var e;return(0,s.default)(this,t),e=(0,u.default)(this,(0,d.default)(t).apply(this,arguments)),e.view=void 0,e.state={submitting:!1},e.getViewDom=function(t){e.view=t},e.handlerSubmit=function(t){t.preventDefault();var n=e.props,a=n.form,i=n.saveSettings;a.validateFields(function(t,n){t||(e.setState({submitting:!0}),i(n,function(){e.setState({submitting:!1})}))})},e.handleEditorChange=function(t,n){var a=e.props.form,i={};i[n]=t,a.setFieldsValue(i)},e.saveEditorContent=function(t,n){var a=e.props.form,i={};i[n]=t,a.setFieldsValue(i)},e.setFieldInput=function(t,n){switch(t.key){case"site-about-content":case"site-about-other":return p.default.createElement(g.default,{content:t.value,key:t.key,id:t.key,handleEditorChange:e.handleEditorChange,saveEditorContent:e.saveEditorContent});default:return p.default.createElement(h.default,{key:"setting-".concat(n),style:{minHeight:32,height:100,width:"100%"},rows:4})}},e}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,n=t.form.getFieldDecorator,a=t.settings,i=this.state.submitting;return a?p.default.createElement("div",{className:m.default.baseView,ref:this.getViewDom},p.default.createElement(r.default,{size:"large",tip:"\u6b63\u5728\u4fdd\u5b58",spinning:i},p.default.createElement(f.Form,{layout:"vertical",hideRequiredMark:!0},a.map(function(t,a){return p.default.createElement(y,{key:"label-".concat(a),label:t.description},n(t.key,{initialValue:t.value})(e.setFieldInput(t,a)))}),p.default.createElement(o.default,{type:"primary",onClick:this.handlerSubmit},"\u4fdd\u5b58")))):""}}]),t}(p.Component),b=(0,v.connect)(function(e){var t=e.setting;return{settings:t.settings}})(f.Form.create()(w));t.default=b}}]);